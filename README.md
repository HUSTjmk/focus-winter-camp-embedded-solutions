# 机电/嵌入式赛道的参考解决方案--这个是给xdx看的，examples,datasheets放历程和资料

## 简介
- 你需要与其余两人合作，在一周的时间内，用我们提供的板子和模块，参考我们提供的资料，制作一个完整的桌宠（要求履带式）。你需要独立完成小狗外壳与履带的设计打印、板子的焊接以及代码的编写与调试

## 任务
### 机械篇
- 以下有4个TASK，其中TASK1为环境相关，TASK2为基础任务，TASK3为附加任务，TASK4为心得体会。必做任务是TASK1、TASK2与TASK4，建议机械组同学尽快完成前两个任务，方便电控组同学后续进行调试
- 机械组的同学们，学长学姐已经默认你们这一学期已经学到了SolidWorks等3D建模软件的绘图功能以及BambuStudio的基础参数设置，这两个软件功能还不太熟练的同学请先从b站上自学相应的内容，方便后续任务的完成
- TASK1：**环境搭建**\
  良好的开端是成功的一半，请确保你的电脑上已经有SolidWorks（2024版，一定要是这个版本，不然学长学姐们打不开你的文件）和BambuStudio两款软件，还没有下载的同学可以参考以下资料:  
  Solidworks（2024版）一键下载：https://www.bilibili.com/video/BV14rDwYnEpe/?spm_id_from=333.337.search-card.all.click&vd_source=fcc63609845574c1206cec5c666affba  
  BambuStudio请自行到拓竹官网上进行下载
- TASK2：**基础任务**  
  - TASK2.0：**机械小狗的建模与装配**
    - TASK 2.0.0: **小狗本体与履带的建模**\
      你需要通过SolidWorks进行小狗本体的建模、履带建模、链轮建模、直流电机建模等  
      (1)：小狗本体的建模应有预留的可以给电机、LCD屏幕以及电路板固定的孔位，明显的棱边需要进行倒角或圆角处理  
      (2)：舵机、LCD屏的建模应尽可能准确，方便后续装配。你也可以向商家索要模型  
      (3)：小狗本体的建模应使用尽可能少的特征树，这样既易读懂又方便后续修改  
      (4)：履带和链轮建模可以参考此视频：https://www.bilibili.com/video/BV1h9VgzPEYk/?spm_id_from=333.1387.favlist.content.click&vd_source=fcc63609845574c1206cec5c666affba
    - TASK 2.0.1：**机械小狗的装配**\
      单个零件并没有什么作用，他们装配起来才是一个完整的机构  
      你需要把所有的零件装配成一个装配体，并进行干涉检查  
      最后，将“小狗本体特征树截图”、“装配体打包”以及“干涉检查截图”与软件组一起上传在git地址里  
      <img src="./datasheets/Machine/2.png" alt="小狗本体特征树截图" width="640">
      <img src="./datasheets/Machine/3.png" alt="装配体打包" width="640">
      <img src="./datasheets/Machine/1.png" alt="干涉检查截图" width="640">
  - TASK2.1 **小狗本体的3D打印**\
    先前没有使用过BambuStudio的小伙伴请从b站上学习完相应3D打印知识后再进行小狗本体等3D打印
- TASK3：**附加任务**\
  我们任务的最终目的是做出一个完整的产品，而完整的产品要求好的封装  
  你需要设计出一个外壳，尽可能地包裹住内部的电路与走线  
  (1)：这只是附加任务，你设计的小狗外壳不应干扰小狗的正常功能  
  (2)：你所设计的外壳要稳定，不能存在走几步就松动的情况  
  (3)：小狗外壳要方便拆解，请不要直接用胶水粘上，这样不方便后续调试
- TASK4：**心得体会**\
  闻一多先生有言：“莫问收获，但问耕耘”。无论结果如何，我们总会在前进的过程中收获很多  
  请写一篇关于你在冬令营收获了什么的文章，文体不限，字数不少于300字，文件名为“小队名称+机械组+姓名”，并连同先前的文件一起传到git地址里  
### 电路篇

### 软件篇
- 以下有3个TASK,其中TASK1为环境相关，TASK2为基础任务，TASK3为心得体会。其中任务前带*号的是附加任务，留给学有余力的同学完成。建议基础任务由两人分工完成。大一同学至少完成基础任务，大二同学在完成基础任务的基础上再至少完成一个附加任务。 
- 嵌软的同学，学长学姐已经默认你们这一学期已经学习了C/C++的编程，对于github的使用，学长不多介绍了。你们需要创建自己的github仓库，上传你们的作品，并写明一个README文件给我们介绍你们的作品。git仓库地址需要你们私发给我们 
- examples目录下存放一些学长跑通了的历程，给各位参考 
- datasheets目录下存放一些可能用到的资料，供各位查阅 
- docs目录下放置一些需要的图片、视频等
- TASK1：**环境搭建** 
  - TASK1.0:**搭建环境** 
    - TASK1.0.0：**搭建stm32的环境** 
      千里之行，始于足下！开发一块板子你首先需要一个开发环境。对于stm32开发来说，主流有寄存器/标准库/HAL库等开发方式。我们推荐HAL库开发，当然你也可以参考江科大等优秀的历程使用其他方式开发。下面的叙述都是基于HAL库（Keil+Cubemx+Vscode的Keil插件）为基础。下面是我们推荐的参考教程：
      - 标准库：[闻名四海的江科大](https://www.bilibili.com/video/BV1th411z7sn)
      - HAL库（Keil+Cubemx+Vscode）：[尚硅谷，没时间可以跳过寄存器](https://www.bilibili.com/video/BV1KM4m1U7f1/)
      - HAL库（Clion）：[keysking，cmake开发的历程比较少，上手稍微有点难度](https://www.bilibili.com/video/BV1pnjizYEAk)
    - TASK1.0.1：**点亮一个LED灯泡💡**  
      看来你已经配完了环境，太棒了！但是环境配好了不一定代表stm32的代码可以很顺利地编译、下载与调试呢~~实践是检验真理的唯一标准，接下来我们试试点亮板载的LED（PC13引脚），看看我们的环境是否完全搭建好了吧！
    - TASK1.0.2：**录一段点亮LED的视频并上传给我们哦！** 
- TASK2：**基础任务**     
  - TASK2.0：**Movement**     
    运动是桌宠的必备技能。我们为你们提供了四个直流减速电机和一个舵机，你需要用他们驱动轮子/尾巴，使你的桌宠动起来！而最简单的驱动电机/舵机方式需要用到很基础但很实用的一种技术——PWM，下面根据我们的任务要求去探索吧～
    - TASK2.0.0：**看看学长为你们准备的资料** 
      Datasheets/Software/... 
      对应教程的pwm章节
    - TASK2.0.1：**让电机动起来** 
      测试四个电机，看看它们能不能转动你想要的速度
    - TASK2.0.2：**试试四个电机怎么协调运动，可以让桌宠实现前后左右自由运动** 
    - TASK2.0.3：**让舵机动起来** 
      驱动舵机需要特殊频率与占空比的pwm波。参考之前的教程，让舵机转到你想要的角度吧
    - TASK2.0.4：**你可以DIY一些喜欢的动作** 
        自定义一些可爱的动作，萌化学长学姐，你更可以让我们关注到你哦～**录一段视频**，让我们看见你的宠物的基本动作和可爱的动作（可以不可爱）
  - TASK2.1：**Audio**
    - TASK2.1.0：**看看学长为你们准备的资料** 
      - Datasheets/Software/... 
        网址：...
    - TASK2.1.1：**实现语音播放** 
      你需要查阅SU-03T手册，登陆他们的官网烧录固件，实现语语音播报功能。
    - TASK2.1.2：**实现离线词的使用** 
      好了，你现在已经学会了怎么输出语音了，真棒👍！但是要实现人与桌宠的对话，还要让桌宠听懂你的话。这就需要音频输入与语音识别功能了——SU-03T帮你训练好了微型的语音识别模型，接下来自己动手，让桌宠听见你说的话吧～
    - TASK2.1.3：**用离线词实现运动控制吧** 
      想必你/你得力的队员已经把运动控制搞定了，现在给桌宠说一句”前进”，让它向前冲吧（其他也行）！**这里录一段视频，展现上面的效果！**
      <a id="audio-another-solution"></a>
    - *TASK2.1.4：**语言交互的另一种solution**         
      ESP32是乐鑫公司发布的一款MCU,它因其便利的物联网功能风靡全球。其中ESP32s3等芯片内部集成了音频通道，并且可烧写简单的离线模型，实现你和桌宠的对话。查阅相关资料，任务做完的可以联系jmk试着用它实现语言对话功能。
  - TASK2.2：**Display** 
    - TASK2.2.0：**看看学长为你们准备的资料** 
      Datasheets/Software/...  
      网址：...
    - TASK2.2.1：**点亮一个屏幕**  
      让你的OLED亮起来！
    - TASK2.2.2：**显示一些emoji/文字**  
      相必很多人看过江科大的stm32教程，上面用了OLED作为一个有力的调试工具。当然OLED也可以显示许多表情和文字。试着做一些文字/表情并用OLED显示吧～
    - TASK2.2.3：**定义一些可爱的表情吧**  
      制作一些可爱的表情（也可以不可爱）。**录一段视频让我们看到表情成功显示了。**
    - *TASK2.2.4：**嵌入式图形化的库工具**  
      相比各位用OLED显示各种图案时还是感觉比较麻烦的。实际开发时我们会选择各种工具库，LVGL是一种轻量便捷的图形库，移植它可以方便我们的开发。尝试使用LVGL制作表情图案，如果有任何苦难及疑惑可随时联系jmk
  - TASK2.3：**Ultrasonic** 
    我们已经实现了桌宠的基本功能——行走、对话。但是学长学姐喜欢一个”粘人的桌宠“。为实现这个功能，或许HC-SR04超声波模块会有所帮助。
    - Task2.3.0：**看看学长为你们准备的资料**  
      Datasheets/Software/..  
      网址：...
    - TASK2.3.1：**实现超声波测距功能**  
      使用HC-SR04实现最基础的测距功能。
    - TASK2.3.2：**让你的桌宠一定程度上的粘人** 
      试着完成一个功能，桌宠始终和你保持固定距离，你走远了他会追上来，你凑近了它会远离
    - TASK2.3.3：**让你的桌宠稍微智能一点的一定程度上的粘人** 
      我们希望你离它很远的时候它可以很快过来，在跟过来的时候速度逐渐下降，实现**平滑**的运动。可见以下VCR。
      <video src="docs/Software/ultrasonic-pid.mp4" controls width="100%"></video>
  - TASK2.4：**Sensor** 
    我们要使用的是PAJ7620U2手势传感器模块，它可以识别基础的手势，丰富我们与桌宠的交互方式
    - Task2.4.0：**看看学长为你们准备的资料** 
      Datasheets/Software/.. 
      网址：...
    - Task2.4.1：**实现手势传感功能** 
      实现手势传感功能，比如向下挥手表示”蹲下“，这时桌宠能够蹲下来。**录制一段视频发给我们**
    - *TASK2.4.2：**手势传感的另一种solution** 
      之前的手势传感是使用传统的物理方法，但其实我们还可以采用摄像头+视觉模型进行开发。我们回到[语言交互的另一种solution](#audio-another-solution)，我们的老朋友ESP32支持多种摄像头接口，并且支持轻量的深度学习模型ESP32-DL。想要解锁该任务，请在保证之前基础任务完成的前提下联系jmk,然后你会得到他的极大关注！
  - TASK2.5：**Combination** 
    - Task2.5.0：好了，相比你已经完美实现了我们的要求了。或许有些基础或附加功能还未来得及实现，没事，凡事总得有些遗憾，你们已经很棒了！无论这些功能是否完成，现在把你们实现的功能包装成产品，带到我们的结营仪式上，让我们审阅吧～